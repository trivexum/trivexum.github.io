<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carveo | TRIVEXUM</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="shortcut icon" href="../icon.png" type="image/x-icon">
</head>

<body>
  <nav id="navbar">
    <div class="nav-left">
      <img src="../icon.png" alt="Icon">
      <p>TRIVEXUM</p>
    </div>
    <div class="nav-right">
      <a href="../index.html"><i class="fas fa-house"></i> Home</a>
      <a href="../projects.html"><i class="fas fa-laptop-code"></i> Projects</a>
      <a href="../contact.html"><i class="fas fa-envelope"></i> Contact</a>
      <a href="../about.html"><i class="fas fa-user"></i> About</a>
      <a href="../blog.html"><i class="fas fa-blog"></i> Blog</a>
      <button id="theme-toggle" aria-label="Toggle Theme">
        <i class="fas fa-moon"></i>
      </button>
    </div>


    <div class="hamburger" onclick="openSidebar()">
      <i class="fas fa-bars"></i>
    </div>
  </nav>

  <div id="sidebar" class="sidebar hidden">
    <div class="sidebar-brand-horizontal">
      <img src="../icon.png" alt="Trivexum Icon" />
      <p>TRIVEXUM</p>
    </div>

    <hr class="sidebar-divider">

    <div class="close-btn" onclick="closeSidebar()">
      <i class="fas fa-times"></i>
    </div>

    <a href="../index.html"><i class="fas fa-house"></i> Home</a>
    <a href="../projects.html"><i class="fas fa-laptop-code"></i> Projects</a>
    <a href="../contact.html"><i class="fas fa-envelope"></i> Contact</a>
    <a href="../about.html"><i class="fas fa-user"></i> About</a>
    <a href="../blog.html"><i class="fas fa-blog"></i> Blog</a>
  </div>

  <div id="overlay" class="overlay hidden" onclick="closeSidebar()"></div>

  <div class="container">
    <h1>Carveo</h1>
    
    <div id="inputs">
      <input type="text" id="make" placeholder="Enter Make (e.g. Toyota)">
      <input type="text" id="model" placeholder="Enter Model (e.g. Camry)">
      <input type="number" id="year" placeholder="Enter Year (e.g. 2020)">
      <button onclick="getCarInfo()">Search</button>
    </div>

    <div id="results" class="card-container"></div>
  </div>

  <footer>
    <p>© 2025 TRIVEXUM. All rights reserved.</p>
  </footer>

  <script>
    async function getCarInfo() {
      const make = document.getElementById("make").value.trim();
      const model = document.getElementById("model").value.trim();
      const year = document.getElementById("year").value.trim();
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "<p>Loading...</p>";

      let url = `https://api.api-ninjas.com/v1/cars?`;
      if (make) url += `make=${make.toLowerCase()}&`;
      if (model) url += `model=${model.toLowerCase()}&`;
      if (year) url += `year=${year}`;

      try {
        const response = await fetch(url, {
          headers: { "X-Api-Key": "yFDJt654dqCNvJwutyhoAFP4J2AEe5GmbOMURcmt" }
        });
        const data = await response.json();

        resultsDiv.innerHTML = "";
        if (data.length === 0) {
          resultsDiv.innerHTML = "<p>No results found </p>";
          return;
        }

        data.forEach(car => {
          const card = document.createElement("div");
          card.classList.add("card");

          card.innerHTML = `
          <h2>${titleCase(car.make)} ${titleCase(car.model)} ${car.class ? titleCase(car.class) : ""} ${car.drive ? formatDrive(car.drive) : ""} (${car.year})</h2>
          <p><strong>Class:</strong> ${titleCase(car.class)}</p>
          <p><strong>Cylinders:</strong> ${car.cylinders ?? "—"}</p>
          <p><strong>Displacement:</strong> ${car.displacement ?? "—"} L</p>
          <p><strong>Drive:</strong> ${car.drive ? formatDrive(car.drive) : "—"}</p>
          <p><strong>Fuel Type:</strong> ${titleCase(car.fuel_type)}</p>
          <p><strong>Transmission:</strong> ${formatTransmission(car.transmission)}</p>
        `;
          resultsDiv.appendChild(card);
        });
      } catch (error) {
        console.error(error);
        resultsDiv.innerHTML = "<p>Error fetching data ❌</p>";
      }
    }

    function titleCase(str) {
      if (!str) return "";
      const acronyms = ["4wd", "awd", "rwd", "fwd", "ev", "gt"];
      return str
        .split(/[\s-]+/)
        .map(word => {
          if (acronyms.includes(word.toLowerCase())) return word.toUpperCase();
          return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
        })
        .join(" ");
    }

    function formatDrive(drive) {
      if (!drive) return "";
      const map = { "4wd": "4WD", "awd": "AWD", "rwd": "RWD", "fwd": "FWD" };
      return map[drive.toLowerCase()] || drive.toUpperCase();
    }

    function formatTransmission(tx) {
      if (!tx) return "";
      if (tx.toLowerCase() === "a") return "Automatic";
      if (tx.toLowerCase() === "m") return "Manual";
      return titleCase(tx);
    }
  </script>

  <script src="../script.js"></script>
  <script src="https://kit.fontawesome.com/5ba3ca3a53.js" crossorigin="anonymous"></script>
</body>

</html>